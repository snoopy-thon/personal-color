<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Webcam Sticker Color Changer</title>
  <style>
    #result_button {
      background-color: skyblue;
      color: white;
      border: none;
      
      padding: 8px 20px;

      border-radius: 10px; /* 모서리의 둥글기 정도를 조정합니다 */
    }
    #canvas {
      border: 1px solid black;
       }
       
      /* 본문 가운데 정렬 */
      body {
        
        justify-content: center; /* 가로 가운데 정렬 */
        text-align: center; /* 내용 가운데 정렬 */
      }

      /* 제목 스타일 */
      h1 {
        margin-top: 100px; /* 원하는 여백 크기를 설정합니다 */
      }   

      /* 본문 내용 스타일 */
      .content {
        margin-top: 50px; /* 위쪽 여백 설정 */
      }

      /* 본문 내용 스타일 */
      .content p {
        margin: 20px 0; /* 상하 여백 설정 */
      }
  </style>
  
</head>
<body>
  <h1>계절별 퍼스널 컬러를 알아봅시다!</h1>
  <div>
    <p>퍼스널 컬러 자가진단을 위해 아래 4가지 컬러팔레트 중 자신과 가장 잘어울리는 팔레트를 선택해주세요</p>
    <label for="color-picker">Color:</label>
    <input type="color" id="color-picker" list="winter-cool">
    
    <datalist id="winter-cool">
      <option value="#F2EE82">winter cool</option>
      <option value="#F1EC5D">winter cool</option>
      <option value="#F1E72D">winter cool</option>
      <option value="#807BB1">winter cool</option>
      <option value="#444F91">winter cool</option>
      <option value="#1C3C91">winter cool</option>
      <option value="#EB6999">winter cool</option>
      <option value="#DF3B6E">winter cool</option>
      <option value="#D71E62">winter cool</option>
      <option value="#2273B4">winter cool</option>
      <option value="#065FA3">winter cool</option>
      <option value="#0B3A70">winter cool</option>
      <option value="#CF106F">winter cool</option>
      <option value="#B40D69">winter cool</option>
      <option value="#7A1F55">winter cool</option>
      <option value="#5CC3E2">winter cool</option>
      <option value="#2DACE3">winter cool</option>
      <option value="#0E73A7">winter cool</option>
      <option value="#9E72AD">winter cool</option>
      <option value="#684297">winter cool</option>
      <option value="#652C79">winter cool</option>
      <option value="#56BDAA">winter cool</option>
      <option value="#1BAD98">winter cool</option>
      <option value="#007B69">winter cool</option>
      <option value="#5750A0">winter cool</option>
      <option value="#202A68">winter cool</option>
      <option value="#1B274D">winter cool</option>
      <option value="#61BA8A">winter cool</option>
      <option value="#118E64">winter cool</option>
      <option value="#006C38">winter cool</option>
    </datalist>
    <input type="radio" name="color-palette" value="option1">
    

    <input type="color" id="color-picker2" list="summer-cool">
    <datalist id="summer-cool">
      <option value="#F9F3C3">summer cool</option>
      <option value="#F2EE83">summer cool</option>
      <option value="#F3ED7F">summer cool</option>
      <option value="#B9D5EA">summer cool</option>
      <option value="#6A75B3">summer cool</option>
      <option value="#424896">summer cool</option>
      <option value="#F2C5CC">summer cool</option>
      <option value="#E38488">summer cool</option>
      <option value="#E15778">summer cool</option>
      <option value="#76B9CC">summer cool</option>
      <option value="#399BC0">summer cool</option>
      <option value="#166EAD">summer cool</option>
      <option value="#E4C4DB">summer cool</option>
      <option value="#BB73A5">summer cool</option>
      <option value="#A04F9B">summer cool</option>
      <option value="#71B1B1">summer cool</option>
      <option value="#46A0A0">summer cool</option>
      <option value="#0B8070">summer cool</option>
      <option value="#DDCFE0">summer cool</option>
      <option value="#7A63A7">summer cool</option>
      <option value="#633983">summer cool</option>
      <option value="#BFDDDB">summer cool</option>
      <option value="#65B88E">summer cool</option>
      <option value="#177C50">summer cool</option>
      <option value="#B8B5D2">summer cool</option>
      <option value="#4E4B92">summer cool</option>
      <option value="#353066">summer cool</option>
      <option value="#8DB3A4">summer cool</option>
      <option value="#068375">summer cool</option>
      <option value="#305E5E">summer cool</option>

    </datalist>
    <input type="radio" name="color-palette" value="option2">
    


    <input type="color" id="color-picker3" list="spring-warm">
    <datalist id="spring-warm">
      <option value="#F0EE89">spring warm</option>
      <option value="#EDE76D">spring warm</option>
      <option value="#DEDE26">spring warm</option>
      <option value="#CD7B9F">spring warm</option>
      <option value="#C8518B">spring warm</option>
      <option value="#961D84">spring warm</option>
      <option value="#F7F5CE">spring warm</option>
      <option value="#F7D097">spring warm</option>
      <option value="#EEA572">spring warm</option>
      <option value="#B8DCEA">spring warm</option>
      <option value="#1CAAD0">spring warm</option>
      <option value="#1F79BB">spring warm</option>
      <option value="#F4D1BB">spring warm</option>
      <option value="#E4AD8F">spring warm</option>
      <option value="#F08171">spring warm</option>
      <option value="#A4D7D0">spring warm</option>
      <option value="#6BC3B5">spring warm</option>
      <option value="#1AAAB3">spring warm</option>
      <option value="#E5766D">spring warm</option>
      <option value="#DD5144">spring warm</option>
      <option value="#E73614">spring warm</option>
      <option value="#6FC088">spring warm</option>
      <option value="#2BA751">spring warm</option>
      <option value="#178C3B">spring warm</option>
      <option value="#ED8F8F">spring warm</option>
      <option value="#D76777">spring warm</option>
      <option value="#E0133A">spring warm</option>
      <option value="#C2D555">spring warm</option>
      <option value="#95C43A">spring warm</option>
      <option value="#56B331">spring warm</option>
    </datalist>
    <input type="radio" name="color-palette" value="option3">

    <input type="color" id="color-picker4" list="autumn-warm">
    <datalist id="autumn-warm">
      <option value="#F4CC75">autumn warm</option>
      <option value="#E5B72C">autumn warm</option>
      <option value="#BAB013">autumn warm</option>
      <option value="#6D225A">autumn warm</option>
      <option value="#45214D">autumn warm</option>
      <option value="#2D1535">autumn warm</option>
      <option value="#D78452">autumn warm</option>
      <option value="#E2611E">autumn warm</option>
      <option value="#9A6225">autumn warm</option>
      <option value="#5F5C93">autumn warm</option>
      <option value="#4A4393">autumn warm</option>
      <option value="#362E67">autumn warm</option>
      <option value="#C84E25">autumn warm</option>
      <option value="#A84023">autumn warm</option>
      <option value="#78251D">autumn warm</option>
      <option value="#1595B0">autumn warm</option>
      <option value="#137F8C">autumn warm</option>
      <option value="#005E78">autumn warm</option>
      <option value="#C64444">autumn warm</option>
      <option value="#BB1C21">autumn warm</option>
      <option value="#8C1D23">autumn warm</option>
      <option value="#2C975F">autumn warm</option>
      <option value="#066C3A">autumn warm</option>
      <option value="#02381E">autumn warm</option>
      <option value="#AE3B66">autumn warm</option>
      <option value="#8B1C2C">autumn warm</option>
      <option value="#571940">autumn warm</option>
      <option value="#8A9C2C">autumn warm</option>
      <option value="#629E3C">autumn warm</option>
      <option value="#3E7637">autumn warm</option>
    </datalist>
    <input type="radio" name="color-palette" value="option4">
    <button id="result_button" onclick="getResult()">결과 보기</button>
  </div>
   <canvas id="canvas" width="640" height="480"></canvas>
  <script>
    const canvas = document.getElementById('canvas');
    const colorPicker = document.getElementById('color-picker');
    const colorPicker2 = document.getElementById('color-picker2');
    const colorPicker3 = document.getElementById('color-picker3');
    const colorPicker4 = document.getElementById('color-picker4');
    const ctx = canvas.getContext('2d');
    let sticker = null;

    

    // 웹캠으로부터 비디오 스트림을 가져옵니다.
    navigator.mediaDevices.getUserMedia({ video: true })
      .then(stream => {
        const video = document.createElement('video');
        video.srcObject = stream;
        video.play();
        // 비디오가 로드되면 캔버스에 그립니다.
        video.addEventListener('loadedmetadata', () => {
          canvas.width = video.videoWidth;
          canvas.height = video.videoHeight;
          draw(video);
        });
      })
      .catch(err => {
        console.error('Error accessing webcam', err);
      });

    // 캔버스에 비디오 스트림을 그립니다.
      function draw(video) {
      ctx.save();
      ctx.scale(-1, 1); // x축 좌우반전
      ctx.drawImage(video, -canvas.width, 0, canvas.width, canvas.height);
      ctx.restore();
      if (sticker) {
        const width = canvas.width; // 스티커 이미지의 크기를 조절합니다.
        const height = sticker.height * 0.3;
        const x = 0;
        const y = canvas.height-height;

        
        ctx.drawImage(sticker, x, y, width, height);
      }
      requestAnimationFrame(() => draw(video));
      
    }

  colorPicker.addEventListener('input', e => {
  const color = e.target.value;
  if (sticker) {
    // 스티커 이미지를 색상이 적용된 이미지로 다시 그립니다.
    const canvas2 = document.createElement('canvas');
    const ctx2 = canvas2.getContext('2d');
    canvas2.width = sticker.width;
    canvas2.height = sticker.height;
    ctx2.drawImage(sticker, 0, 0);
    ctx2.globalCompositeOperation = 'source-in';
    ctx2.fillStyle = color;
    ctx2.fillRect(0, 0, canvas2.width, canvas2.height);
    const newSticker = new Image();
    newSticker.src = canvas2.toDataURL();
    newSticker.onload = () => {
      sticker = newSticker;
    };
  }
});

colorPicker2.addEventListener('input', e => {
  const color = e.target.value;
  if (sticker) {
    const canvas2 = document.createElement('canvas');
    const ctx2 = canvas2.getContext('2d');
    canvas2.width = sticker.width;
    canvas2.height = sticker.height;
    ctx2.drawImage(sticker, 0, 0);
    ctx2.globalCompositeOperation = 'source-in';
    ctx2.fillStyle = color;
    ctx2.fillRect(0, 0, canvas2.width, canvas2.height);
    const newSticker = new Image();
    newSticker.src = canvas2.toDataURL();
    newSticker.onload = () => {
      sticker = newSticker;
    };
  }
});

colorPicker3.addEventListener('input', e => {
  const color = e.target.value;
  if (sticker) {
    const canvas2 = document.createElement('canvas');
    const ctx2 = canvas2.getContext('2d');
    canvas2.width = sticker.width;
    canvas2.height = sticker.height;
    ctx2.drawImage(sticker, 0, 0);
    ctx2.globalCompositeOperation = 'source-in';
    ctx2.fillStyle = color;
    ctx2.fillRect(0, 0, canvas2.width, canvas2.height);
    const newSticker = new Image();
    newSticker.src = canvas2.toDataURL();
    newSticker.onload = () => {
      sticker = newSticker;
    };
  }
});

colorPicker4.addEventListener('input', e => {
  const color = e.target.value;
  if (sticker) {
    const canvas2 = document.createElement('canvas');
    const ctx2 = canvas2.getContext('2d');
    canvas2.width = sticker.width;
    canvas2.height = sticker.height;
    ctx2.drawImage(sticker, 0, 0);
    ctx2.globalCompositeOperation = 'source-in';
    ctx2.fillStyle = color;
    ctx2.fillRect(0, 0, canvas2.width, canvas2.height);
    const newSticker = new Image();
    newSticker.src = canvas2.toDataURL();
    newSticker.onload = () => {
      sticker = newSticker;
    };
  }
});


    // 스티커 이미지를 로드합니다.
    const stickerImage = new Image();
    stickerImage.src = 'sticker.png';
    stickerImage.onload = () => {
      sticker = stickerImage;
    };
    stickerImage.src = '../images/personal.png'; // 스티커 이미지의 경로를 지정해야 합니다.


        // 웹캠 접근 권한을 요청합니다.
        navigator.mediaDevices.getUserMedia({ video: true })
      .then(stream => {
        console.log('Webcam access granted');
      })
      .catch(err => {
        console.error('Webcam access denied', err);
      });

  function getResult() {
    var options = document.getElementsByName("color-palette");
    var selectedOption = "";

    for(var i = 0; i < options.length; i++) {
      if(options[i].checked) {
        selectedOption = options[i].value;
        break;
      }
    }

    if(selectedOption === "option1") {
      window.location.href = "../winter/winter.html";
    } else if(selectedOption === "option2") {
      window.location.href = "../summer/summer.html";
    } else if(selectedOption === "option3") {
      window.location.href = "../spring/spring.html";
    } else if(selectedOption === "option4") {
      window.location.href = "../autumn/autumn.html";
    } else {
      alert("컬러 팔레트를 선택해주세요.");
    }
}

  </script>
</body>
</html>


